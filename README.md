# NestJS + Prisma AWS Lambda Demo

åŸºäº NestJS å’Œ Prisma çš„ AWS Lambda æ— æœåŠ¡å™¨åº”ç”¨æ¼”ç¤ºé¡¹ç›®ã€‚

## ğŸš€ ç‰¹æ€§

- **NestJS æ¡†æ¶**ï¼šç°ä»£åŒ–çš„ Node.js åç«¯æ¡†æ¶
- **Prisma ORM**ï¼šç±»å‹å®‰å…¨çš„æ•°æ®åº“è®¿é—®
- **AWS Lambda**ï¼šæ— æœåŠ¡å™¨éƒ¨ç½²
- **Lambda Layers**ï¼šä¼˜åŒ–åŒ…å¤§å°å’Œéƒ¨ç½²é€Ÿåº¦
- **PostgreSQL**ï¼šç”Ÿäº§çº§æ•°æ®åº“

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ src/                    # æºä»£ç 
â”‚   â”œâ”€â”€ prisma.service.ts  # Prisma æœåŠ¡
â”‚   â”œâ”€â”€ note.controller.ts # ç¬”è®°æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ note.service.ts    # ç¬”è®°æœåŠ¡
â”‚   â””â”€â”€ lambda.ts          # Lambda å…¥å£
â”œâ”€â”€ prisma/                # Prisma é…ç½®
â”‚   â””â”€â”€ schema.prisma      # æ•°æ®åº“æ¨¡å¼
â”œâ”€â”€ template.yaml          # SAM æ¨¡æ¿
â””â”€â”€ deploy.sh              # éƒ¨ç½²è„šæœ¬
```

## ğŸ› ï¸ å¼€å‘

```bash
# å®‰è£…ä¾èµ–
yarn install

# ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
yarn prisma:generate

# æœ¬åœ°å¼€å‘
yarn start:dev

# æ„å»º
yarn build
```

## ğŸš€ éƒ¨ç½²

```bash
# ä¸€é”®éƒ¨ç½²åˆ° AWS
yarn deploy
```

## ğŸ“Š API æ¥å£

- `GET /notes` - è·å–æ‰€æœ‰ç¬”è®°
- `POST /notes` - åˆ›å»ºæ–°ç¬”è®°
- `DELETE /notes/:id` - åˆ é™¤ç¬”è®°

## ğŸ—ï¸ æ¶æ„è¯´æ˜

### Lambda Layers ç­–ç•¥
- **Layer**: NestJS æ¡†æ¶å’Œé€šç”¨ä¾èµ–
- **åº”ç”¨åŒ…**: Prisma å®¢æˆ·ç«¯å’Œä¸šåŠ¡ä»£ç 

### ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ
1. **åŒ…å¤§å°ä¼˜åŒ–**: é€šç”¨ä¾èµ–æ”¾ Layerï¼Œå‡å°‘åº”ç”¨åŒ…å¤§å°
2. **éƒ¨ç½²é€Ÿåº¦**: Layer ç¼“å­˜ï¼Œåªéœ€é‡æ–°éƒ¨ç½²ä¸šåŠ¡ä»£ç 
3. **é¿å…è·¯å¾„å†²çª**: Prisma äºŒè¿›åˆ¶æ–‡ä»¶å•ç‹¬å¤„ç†

## ğŸ”§ é…ç½®

### ç¯å¢ƒå˜é‡
- `DATABASE_URL`: PostgreSQL è¿æ¥å­—ç¬¦ä¸²
- `GITHUB_TOKEN`: GitHub API ä»¤ç‰Œ

### AWS èµ„æº
- Lambda å‡½æ•° (ARM64)
- API Gateway
- VPC å’Œå®‰å…¨ç»„
- Lambda Layer

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **Prisma ä¸æ”¾ Layer**: é¿å…äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„å†²çª
2. **ARM64 æ¶æ„**: æ€§èƒ½æ›´å¥½ï¼Œæˆæœ¬æ›´ä½
3. **VPC é…ç½®**: ç”¨äºè¿æ¥ RDS æ•°æ®åº“

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
- **Prisma åˆå§‹åŒ–å¤±è´¥**: æ£€æŸ¥äºŒè¿›åˆ¶æ–‡ä»¶æ˜¯å¦æ­£ç¡®ç”Ÿæˆ
- **æ•°æ®åº“è¿æ¥è¶…æ—¶**: æ£€æŸ¥ VPC å’Œå®‰å…¨ç»„é…ç½®
- **åŒ…å¤§å°è¶…é™**: ç¡®ä¿ Prisma ä¸åœ¨ Layer ä¸­

### æŸ¥çœ‹æ—¥å¿—
```bash
aws logs tail /aws/lambda/mpa-aws-demo-nestjs-api --follow
```